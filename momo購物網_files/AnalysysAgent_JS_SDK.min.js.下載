!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Ans=t()}(this,function(){"use strict";var fieldTemplate={base:{outer:["appid","xwho","xwhat","xwhen","xcontext"],xcontext:["$lib","$lib_version","$platform","$debug","$is_login"]},$startup:{xcontext:["$screen_width","$screen_height","$web_crawler","$time_zone","$language","$session_id","$is_first_time","$is_first_day","$utm_campaign_id","$utm_source","$utm_medium","$utm_term","$utm_content","$utm_campaign","$session_id","$is_time_calibrated"]},$track:{xcontext:["$screen_width","$screen_height","$web_crawler","$time_zone","$language","$is_first_day","$session_id","$utm_campaign_id","$utm_source","$utm_medium","$utm_term","$utm_content","$utm_campaign","$session_id","$is_time_calibrated"]},$pageview:{xcontext:["$screen_width","$screen_height","$web_crawler","$time_zone","$language","$session_id","$is_first_day","$referrer","$referrer_domain","$title","$url","$startup_time","$utm_campaign_id","$utm_source","$utm_medium","$utm_term","$utm_content","$utm_campaign","$session_id","$is_time_calibrated"]},$alias:{xcontext:["$original_id"]},$getPresetProperties:{xcontext:["$screen_width","$screen_height","$time_zone","$session_id","$language"]}},baseConfig={base:{appid:"",$debug:0,uploadURL:"",auto:!0,autoProfile:!0,hash:!0,pageProperty:{},$lib_version:"4.3.4.4"},status:{code:200,FnName:"",key:"",value:"",errorCode:"",successCode:""},keywords:fieldTemplate.base.xcontext,baseJson:fieldTemplate.base.outer,sendNum:1800},_keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function _utf8_encode(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t}function _utf8_decode(e){for(var t="",r=0,n=0,i=0,o=0;r<e.length;)(n=e.charCodeAt(r))<128?(t+=String.fromCharCode(n),r++):n>191&&n<224?(i=e.charCodeAt(r+1),t+=String.fromCharCode((31&n)<<6|63&i),r+=2):(i=e.charCodeAt(r+1),o=e.charCodeAt(r+2),t+=String.fromCharCode((15&n)<<12|(63&i)<<6|63&o),r+=3);return t}function Util(){}function CheckChinese(e){return!!new RegExp("[\\u4E00-\\u9FFF]+","g").test(e)}Util.prototype.paramType=function(e){return Object.prototype.toString.call(e).replace("[object ","").replace("]","")},Util.prototype.objHasKay=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},Util.prototype.ArrayToObj=function(e){for(var t={},r=0;r<e.length;r++)t[e[r]]="";return t},Util.prototype.keyValueToObje=function(e,t){var r={};return r[e]=t,r},Util.prototype.toDeepObj=function(e,t,r){var n={};if("String"===this.paramType(e))return n=this.keyValueToObje(e,t);if("Array"===this.paramType(e))return n=this.ArrayToObj(e);if("Object"===this.paramType(e))for(var i in e)n[i]=this.toDeepObj(e[i]);return n},Util.prototype.toObj=function(e,t,r){var n={};return"String"===this.paramType(e)?n=this.keyValueToObje(e,t):"Array"===this.paramType(e)?n=this.ArrayToObj(e):"Object"===this.paramType(e)?e:n},Util.prototype.objMerge=function(e,t){if("Object"!==this.paramType(e)||"Object"!==this.paramType(t))return e;var r={};for(var n in e)r[n]=e[n];for(var n in t)r[n]&&"Object"===this.paramType(r[n])&&"Object"===this.paramType(t[n])?r[n]=this.objMerge(r[n],t[n]):"Array"===this.paramType(r[n])&&"Array"===this.paramType(t[n])?r[n]=this.arrayMergeUnique(r[n],t[n]):r[n]=t[n];return r},Util.prototype.compose=function(){var e=arguments,t=e.length-1;return function(){for(var r=t,n=e[t].apply(this,arguments);r--;)n=e[r].call(this,n);return n}},Util.prototype.fnMerge=function(e,t){if("Object"!==this.paramType(e)||"Object"!==this.paramType(t))return e;var r={};for(var n in e)r[n]=e[n];for(var n in t)r[n]&&"Object"===this.paramType(r[n])&&"Object"===this.paramType(t[n])?r[n]=this.fnMerge(r[n],t[n]):"Function"===this.paramType(r[n])&&"Function"===this.paramType(t[n])?r[n]=this.compose(r[n],t[n]):r[n]=t[n];return r},Util.prototype.arrayUnique=function(e){for(var t=[],r={},n=0;n<e.length;n++)r[e[n]]||(r[e[n]]=!0,t.push(e[n]));return t},Util.prototype.arrayMerge=function(e,t){return e.push.apply(e,t),e},Util.prototype.arrayMergeUnique=function(e,t){return e.push.apply(e,t),this.arrayUnique(e)},Util.prototype.encode=function(e){var t,r,n,i,o,a,s,l="",c=0;for(e=_utf8_encode(e);c<e.length;)i=(t=e.charCodeAt(c++))>>2,o=(3&t)<<4|(r=e.charCodeAt(c++))>>4,a=(15&r)<<2|(n=e.charCodeAt(c++))>>6,s=63&n,isNaN(r)?a=s=64:isNaN(n)&&(s=64),l=l+_keyStr.charAt(i)+_keyStr.charAt(o)+_keyStr.charAt(a)+_keyStr.charAt(s);return l},Util.prototype.decode=function(e){var t,r,n,i,o,a,s="",l=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<e.length;)t=_keyStr.indexOf(e.charAt(l++))<<2|(i=_keyStr.indexOf(e.charAt(l++)))>>4,r=(15&i)<<4|(o=_keyStr.indexOf(e.charAt(l++)))>>2,n=(3&o)<<6|(a=_keyStr.indexOf(e.charAt(l++))),s+=String.fromCharCode(t),64!=o&&(s+=String.fromCharCode(r)),64!=a&&(s+=String.fromCharCode(n));return s=_utf8_decode(s)},Util.prototype.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},Util.prototype.format=function(e,t){var r=e.getTimezoneOffset(),n={"M+":(e=new Date(e.getTime()+60*r*1e3+288e5)).getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),"S+":e.getMilliseconds()};for(var i in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,3==RegExp.$1.length?(""+n[i]).length<3?("00"+n[i]).substr(("00"+n[i]).length-3,("00"+n[i]).length):n[i]:("00"+n[i]).substr((""+n[i]).length)));return t},Util.prototype.MD5=function(e,t){var r=e;function n(e,t){return e<<t|e>>>32-t}function i(e,t){var r,n,i,o,a;return i=2147483648&e,o=2147483648&t,a=(1073741823&e)+(1073741823&t),(r=1073741824&e)&(n=1073741824&t)?2147483648^a^i^o:r|n?1073741824&a?3221225472^a^i^o:1073741824^a^i^o:a^i^o}function o(e,t,r,o,a,s,l){return i(n(e=i(e,i(i(function(e,t,r){return e&t|~e&r}(t,r,o),a),l)),s),t)}function a(e,t,r,o,a,s,l){return i(n(e=i(e,i(i(function(e,t,r){return e&r|t&~r}(t,r,o),a),l)),s),t)}function s(e,t,r,o,a,s,l){return i(n(e=i(e,i(i(function(e,t,r){return e^t^r}(t,r,o),a),l)),s),t)}function l(e,t,r,o,a,s,l){return i(n(e=i(e,i(i(function(e,t,r){return t^(e|~r)}(t,r,o),a),l)),s),t)}function c(e){var t,r="",n="";for(t=0;t<=3;t++)r+=(n="0"+(e>>>8*t&255).toString(16)).substr(n.length-2,2);return r}var u,p,g,f,d,m,y,h,v,$=Array();for($=function(e){for(var t,r=e.length,n=r+8,i=16*((n-n%64)/64+1),o=Array(i-1),a=0,s=0;s<r;)a=s%4*8,o[t=(s-s%4)/4]=o[t]|e.charCodeAt(s)<<a,s++;return a=s%4*8,o[t=(s-s%4)/4]=o[t]|128<<a,o[i-2]=r<<3,o[i-1]=r>>>29,o}(r),m=1732584193,y=4023233417,h=2562383102,v=271733878,u=0;u<$.length;u+=16)p=m,g=y,f=h,d=v,y=l(y=l(y=l(y=l(y=s(y=s(y=s(y=s(y=a(y=a(y=a(y=a(y=o(y=o(y=o(y=o(y,h=o(h,v=o(v,m=o(m,y,h,v,$[u+0],7,3614090360),y,h,$[u+1],12,3905402710),m,y,$[u+2],17,606105819),v,m,$[u+3],22,3250441966),h=o(h,v=o(v,m=o(m,y,h,v,$[u+4],7,4118548399),y,h,$[u+5],12,1200080426),m,y,$[u+6],17,2821735955),v,m,$[u+7],22,4249261313),h=o(h,v=o(v,m=o(m,y,h,v,$[u+8],7,1770035416),y,h,$[u+9],12,2336552879),m,y,$[u+10],17,4294925233),v,m,$[u+11],22,2304563134),h=o(h,v=o(v,m=o(m,y,h,v,$[u+12],7,1804603682),y,h,$[u+13],12,4254626195),m,y,$[u+14],17,2792965006),v,m,$[u+15],22,1236535329),h=a(h,v=a(v,m=a(m,y,h,v,$[u+1],5,4129170786),y,h,$[u+6],9,3225465664),m,y,$[u+11],14,643717713),v,m,$[u+0],20,3921069994),h=a(h,v=a(v,m=a(m,y,h,v,$[u+5],5,3593408605),y,h,$[u+10],9,38016083),m,y,$[u+15],14,3634488961),v,m,$[u+4],20,3889429448),h=a(h,v=a(v,m=a(m,y,h,v,$[u+9],5,568446438),y,h,$[u+14],9,3275163606),m,y,$[u+3],14,4107603335),v,m,$[u+8],20,1163531501),h=a(h,v=a(v,m=a(m,y,h,v,$[u+13],5,2850285829),y,h,$[u+2],9,4243563512),m,y,$[u+7],14,1735328473),v,m,$[u+12],20,2368359562),h=s(h,v=s(v,m=s(m,y,h,v,$[u+5],4,4294588738),y,h,$[u+8],11,2272392833),m,y,$[u+11],16,1839030562),v,m,$[u+14],23,4259657740),h=s(h,v=s(v,m=s(m,y,h,v,$[u+1],4,2763975236),y,h,$[u+4],11,1272893353),m,y,$[u+7],16,4139469664),v,m,$[u+10],23,3200236656),h=s(h,v=s(v,m=s(m,y,h,v,$[u+13],4,681279174),y,h,$[u+0],11,3936430074),m,y,$[u+3],16,3572445317),v,m,$[u+6],23,76029189),h=s(h,v=s(v,m=s(m,y,h,v,$[u+9],4,3654602809),y,h,$[u+12],11,3873151461),m,y,$[u+15],16,530742520),v,m,$[u+2],23,3299628645),h=l(h,v=l(v,m=l(m,y,h,v,$[u+0],6,4096336452),y,h,$[u+7],10,1126891415),m,y,$[u+14],15,2878612391),v,m,$[u+5],21,4237533241),h=l(h,v=l(v,m=l(m,y,h,v,$[u+12],6,1700485571),y,h,$[u+3],10,2399980690),m,y,$[u+10],15,4293915773),v,m,$[u+1],21,2240044497),h=l(h,v=l(v,m=l(m,y,h,v,$[u+8],6,1873313359),y,h,$[u+15],10,4264355552),m,y,$[u+6],15,2734768916),v,m,$[u+13],21,1309151649),h=l(h,v=l(v,m=l(m,y,h,v,$[u+4],6,4149444226),y,h,$[u+11],10,3174756917),m,y,$[u+2],15,718787259),v,m,$[u+9],21,3951481745),m=i(m,p),y=i(y,g),h=i(h,f),v=i(v,d);return 32==t?c(m)+c(y)+c(h)+c(v):c(y)+c(h)},Util.prototype.clientTimeZone=function(){var e=(new Date).getTimezoneOffset(),t=parseInt(e/60),r=e%60,n="-";return(t<=0||r<0)&&(n="+",t=-t,r<0&&(r=-r)),r+="",1==(t+="").length&&(t="0"+t),1==r.length&&(r="0"+r),n+t+":"+r},Util.prototype.delEmpty=function(e){var t={};for(var r in e){var n=!0,i=this.paramType(e[r]);"Object"!==i?(e[r]||"Number"===i&&!isNaN(e[r])||"Boolean"===i||(n=!1),!0===n&&(t[r]=e[r])):t[r]=this.delEmpty(e[r])}for(var r in t){var o=[];for(var a in t[r])o.push(t[r][a]);0===o.length&&t[r].constructor===Object&&delete t[r]}return t},Util.prototype.addEvent=function(e,t,r,n){if(document.addEventListener)if(e.length&&e!==window)for(var i=0;i<e.length;i++)this.addEvent(e[i],t,r,n);else e.addEventListener(t,r,n);else if(e.length&&e!==window)for(i=0;i<e.length;i++)this.addEvent(e[i],t,r);else e.attachEvent("on"+t,function(){return r.call(e,window.event)})},Util.prototype.removeEvent=function(e,t,r,n){if(document.removeEventListener)if(e.length)for(var i=0;i<e.length;i++)this.removeEvent(e[i],t,r,n);else e.removeEventListener(t,r,n);else if(e.length)for(i=0;i<e.length;i++)this.removeEvent(e[i],t,r);else e.detachEvent("on"+t,function(){return r.call(e,window.event)})},Util.prototype.addWindowEvent=function(e){var t=history[e];return function(){var r,n=t.apply(this,arguments);document.createEvent?((r=document.createEvent("HTMLEvents")).initEvent(e,!0,!0),r.arguments=arguments,window.dispatchEvent(r)):((r=document.createEventObject()).arguments=arguments,document.fireEvent("on"+e,r));return n}},Util.prototype.extend=function(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.superclass=t.prototype,t.prototype.constructor==Object.prototype.constructor&&(t.prototype.constructor=t)},Util.prototype.addEleLable=function(e,t,r,n){var i=document,o=i.createElement(e),a=n||i.body||i.getElementsByTagName("body")[0];return r&&(o.id=r),t&&(o.className=t),a.appendChild(o),o},Util.prototype.addScript=function(e){var t=document,r=t.createElement("script"),n=t.getElementsByTagName("script");r.type="text/javascript",r.async=!0,r.id=e;var i="";if(t.getElementById("ARK_SDK"))i=t.getElementById("ARK_SDK").src;else for(var o=0;o<n.length;o++)if(n[o].src&&n[o].src.indexOf("AnalysysAgent_JS_SDK")>-1){i=n[o].src;break}var a=i.substring(0,i.lastIndexOf("/")+1),s=new Date;new String(s.getFullYear()),new String(s.getMonth()+1),new String(s.getDate()),new String(s.getDate());r.src=a+e+".min.js?v="+this.format(new Date,"yyyyMMddhhmm"),n[0].parentNode.insertBefore(r,n[0])},Util.prototype.unique=function(e){for(var t={},r=0;r<e.length;r++)"undefined"==typeof t[e[r]]&&(t[e[r]]=1);for(var r in e.length=0,t)e[e.length]=r;return e},Util.prototype.GetUrlParam=function(e){var t=document.location.toString().split("?");if(t.length>1){for(var r,n=t[1].split("&"),i=0;i<n.length;i++)if(null!=(r=n[i].split("="))&&r[0]==e){if(r[1].indexOf("%")>-1)try{var o=decodeURI(r[1]);if(CheckChinese(o))return o}catch(a){return r[1]}return r[1]}return""}return""},Util.prototype.isInArray=function(e,t){for(var r=0;r<e.length;r++)if(t===e[r])return!0;return!1},Util.prototype.stringSlice=function(e,t){return e.slice(0,t)},Util.prototype.trim=function(e){return"String"===this.paramType(e)?e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""):""},Util.prototype.changeHash=function(e){"onpopstate"in window?("onpushState"in window||(window.history.pushState=this.addWindowEvent("pushState")),"onreplaceState"in window||(window.history.replaceState=this.addWindowEvent("replaceState")),this.addEvent(window,"popstate",e),this.addEvent(window,"pushState",e),this.addEvent(window,"replaceState",e),(window.ActiveXObject||"ActiveXObject"in window)&&"onhashchange"in window&&this.addEvent(window,"hashchange",e)):"onhashchange"in window&&document.addEventListener&&this.addEvent(window,"hashchange",e)},Util.prototype.deviceType=function(){var e=navigator.userAgent;return e.indexOf("Tablet")>-1&&e.indexOf("PC")<0||e.indexOf("Pad")>-1||e.indexOf("Nexus 7")>-1?"tablet":e.indexOf("Mobi")>-1||e.indexOf("iPh")>-1||e.indexOf("480")>-1?"phone":"desktop"};var Util$1=new Util;function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var _typeof_1=createCommonjsModule(function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(n){return"function"==typeof Symbol&&"symbol"===t(Symbol.iterator)?e.exports=r=function(e){return t(e)}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":t(e)},r(n)}e.exports=r}),endings=["/",":","?","#"],starters=[".","/","@"];function getDomainFromUrl(e){if("string"!=typeof e)return"";for(var t,r=0,n=0,i=0,o=e.length,a=0;o--&&++a&&!(r&&endings.toString().indexOf(e[a])>-1);)"."===e[a]&&(++r,n=a);for(t=a,a=n;a--;)if(-1!==starters.toString().indexOf(e[a])){i=a+1;break}return i<2?"":e.slice(i,t)}var Local="",Session="";try{Local="object"==_typeof_1(window.localStorage)?window.localStorage:"",Session="object"==_typeof_1(window.sessionStorage)?window.sessionStorage:""}catch(e){}function Storage(){this.localName="FZ_STROAGE",this.sessionName="FZ_SESSION",this.localObj=this.getLocal(),this.sessionObj=this.getSession()}Storage.prototype.setLocal=function(t,r){this.localObj=this.getLocal(),this.localObj[t]=r;try{Local?(Local.setItem(this.localName,Util$1.encode(JSON.stringify(this.localObj))),Session.setItem(this.localName,Util$1.encode(JSON.stringify(this.localObj))),this.removeCookie(this.localName)):"POSTDATA"!==t&&this.setCookie(this.localName,encodeURIComponent(Util$1.encode(JSON.stringify(this.localObj))))}catch(e){}},Storage.prototype.getLocal=function(t){try{var r={};if(Local){if(!(r=Local.getItem(this.localName)))Session.getItem(this.localName)?(r=Session.getItem(this.localName),Local.setItem(this.localName,r)):r=Util$1.encode("{}");this.removeCookie(this.localName)}else r=(r=this.getCookie(this.localName))?decodeURIComponent(r):Util$1.encode("{}");return this.localObj=JSON.parse(Util$1.decode(r)),t?this.localObj[t]:this.localObj}catch(e){return t?"":{}}},Storage.prototype.removeLocal=function(t){if(this.localObj=this.getLocal(),Util$1.objHasKay(this.localObj,t)&&delete this.localObj[t],Util$1.isEmptyObject(this.localObj))try{Local?(Local.removeItem(this.localName),Session.removeItem(this.localName),this.removeCookie(this.localName)):this.removeCookie(this.localName)}catch(e){}else Local?(Local.setItem(this.localName,Util$1.encode(JSON.stringify(this.localObj))),Session.setItem(this.localName,Util$1.encode(JSON.stringify(this.localObj))),this.removeCookie(this.localName)):"POSTDATA"!==t&&"ARK_ID"!=t&&this.setCookie(this.localName,Util$1.encode(JSON.stringify(this.localObj)))},Storage.prototype.setSession=function(t,r){this.sessionObj=this.getSession(),this.sessionObj[t]=r;try{Session?(Session.setItem(this.sessionName,Util$1.encode(JSON.stringify(this.sessionObj))),this.removeCookie(this.sessionName)):"POSTDATA"!==t&&this.setCookie(this.sessionName,Util$1.encode(JSON.stringify(this.sessionObj)),"session")}catch(e){}},Storage.prototype.getSession=function(t){try{var r={};return Session?(r=Session.getItem(this.sessionName)||Util$1.encode("{}"),this.removeCookie(this.sessionName)):r=this.getCookie(this.sessionName)||Util$1.encode("{}"),this.sessionObj=JSON.parse(Util$1.decode(r)),t?this.sessionObj[t]:this.sessionObj}catch(e){return{}}},Storage.prototype.removeSession=function(t){if(this.sessionObj=this.getSession(),Util$1.objHasKay(this.sessionObj,t)&&delete this.sessionObj[t],Util$1.isEmptyObject(this.sessionObj))try{Local?(Session.removeItem(this.sessionName),this.removeCookie(this.sessionName)):this.removeCookie(this.sessionName)}catch(e){}else Session?(Session.setItem(this.sessionName,Util$1.encode(JSON.stringify(this.sessionObj))),this.removeCookie(this.sessionName)):"POSTDATA"!==t&&"ARK_ID"!=t&&this.setCookie(this.sessionName,Util$1.encode(JSON.stringify(this.sessionObj)),"session")},Storage.prototype.setCookie=function(e,t,r){var n=getDomainFromUrl(location.href),i=n?"":"; domain=."+n,o="";if("session"!==r){var a=new Date;a.setTime(a.getTime()+31536e6),o="; expires="+a.toGMTString()}document.cookie=e+"="+t+o+"; path=/"+i},Storage.prototype.getCookie=function(e){var t=document.cookie;if("string"!=typeof t)return"";var r,n,i=e+"=",o=t.split(/[;&]/);for(r=0;r<o.length;r++){for(n=o[r];" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(i))return n.substring(i.length,n.length)}},Storage.prototype.removeCookie=function(e){var t=getDomainFromUrl(location.href),r=t?"":"; domain=."+t,n=new Date;n.setTime(n.getTime()-1e3);var i=n.toGMTString();document.cookie=e+"=; expires="+i+"; path=/"+r};var Storage$1=new Storage,UTM={utm_campaign_id:Util$1.GetUrlParam("campaign_id"),utm_source:Util$1.GetUrlParam("utm_source")||Util$1.GetUrlParam("hmsr"),utm_medium:Util$1.GetUrlParam("utm_medium")||Util$1.GetUrlParam("hmpl"),utm_term:Util$1.GetUrlParam("utm_term")||Util$1.GetUrlParam("hmkw"),utm_content:Util$1.GetUrlParam("utm_content")||Util$1.GetUrlParam("hmci"),utm_campaign:Util$1.GetUrlParam("utm_campaign")||Util$1.GetUrlParam("hmcu")};function clearUTM(){UTM={utm_campaign_id:"",utm_source:"",utm_medium:"",utm_term:"",utm_content:"",utm_campaign:""}}function sessionId(){this.sessionId=Storage$1.getLocal("SEESIONID")||this.setId(),this.sessionDate=Storage$1.getLocal("SEESIONDATE")||0}sessionId.prototype.setId=function(){var e=+new Date;return this.sessionId=Util$1.MD5("JS"+e.toString()+Math.random(0,1e7)),this.sessionDate=e,Storage$1.setLocal("SEESIONID",this.sessionId),Storage$1.setLocal("SEESIONDATE",this.sessionDate),this.sessionId},sessionId.prototype.getId=function(){var e=new Date,t=e.getTime(),r=e.getTimezoneOffset(),n=new Date(t+60*r*1e3+288e5).getDate();this.sessionDate=Storage$1.getLocal("SEESIONDATE")||0;var i=0===this.sessionDate?0:new Date(this.sessionDate+60*r*1e3+288e5).getDate();return(!this.sessionId||!this.sessionDate||Number(t)-Number(this.sessionDate)>18e5||n!==i)&&(clearUTM(),this.setId()),this.sessionDate=t,Storage$1.setLocal("SEESIONDATE",t),this.sessionId=Storage$1.getLocal("SEESIONID")||this.setId(),this.sessionId};var sessionId$1=new sessionId,endings$1=["/",":","?","#"],starters$1=["/","@"];function getDomainFromUrl$1(e){if("string"!=typeof e)return"";for(var t,r=0,n=0,i=0,o=e.length,a=0;o--&&++a&&!(r&&endings$1.indexOf(e[a])>-1);)"."===e[a]&&(++r,n=a);for(t=a,a=n;a--;)if(-1!==starters$1.indexOf(e[a])){i=a+1;break}return e.indexOf("//localhost")>-1?"localhost":i<6?"":e.slice(i,t)}var domain=function(e){if("string"==typeof e)return getDomainFromUrl$1(e);if(Array.isArray(e)){for(var t=[],r=0,n=e.length;r<n;r++)t.push(getDomainFromUrl$1(e[r]));return t}return""},UA=navigator.userAgent.toLowerCase();function checkSpider(){return!!UA.match(/(bot|crawler|spider|scrapy|dnspod|ia_archiver|jiankongbao|slurp|transcoder|networkbench|oneapm|PhantomJS)/i)}function getId(){var e=Storage$1.getLocal("ARK_LOGINID")||Storage$1.getLocal("ARK_TRACKID")||Storage$1.getLocal("ARK_ID");return e&&"[object Object]"!==e||(e=setUUId(),Storage$1.setLocal("ARK_ID",e)),Storage$1.setCookie("ARK_ID",getIdentifyId()||getUUId()),e}function setUUId(){var e=new String((new Date).getTime())+new String(1e4*Math.random()),t="JS"+Util$1.MD5(new String(e),32)+Util$1.MD5(new String(e),32).slice(0,4);return Storage$1.setCookie("ARK_ID",t),t}function getUUId(){var e=Storage$1.getLocal("ARK_ID");return e||(e=setUUId(),Storage$1.setLocal("ARK_ID",e)),e}function removeUUId(){Storage$1.removeLocal("ARK_ID")}function getAliasId(){return Storage$1.getLocal("ARK_LOGINID")}function removeAliasId(){Storage$1.removeLocal("ARK_LOGINID")}function getIdentifyId(){return Storage$1.getLocal("ARK_TRACKID")}function removeIdentifyId(){Storage$1.removeLocal("ARK_TRACK_LOGIN"),Storage$1.removeLocal("ARK_TRACKID")}var base=baseConfig.base;function appkey(e){base.appid=e}function getAppId(){return base.appid}function debugMode(e){base.$debug=e}function getDebugMode(){return base.$debug}function uploadURL(e){"/"!==e.charAt(e.length-1)&&(e+="/"),base.uploadURL=e}function getUploadURL(e){return"/"!==base.uploadURL.charAt(base.uploadURL.length-1)&&(base.uploadURL+="/"),base.uploadURL}function nowDate(){return+new Date+(Storage$1.getLocal("ANSSERVERTIME")?Number(Storage$1.getLocal("ANSSERVERTIME")):0)}function timeCalibration(){return!!Storage$1.getLocal("ANSSERVERTIME")}function getXwhat(){return baseConfig.status.FnName}function isLogin(){return!(!getAliasId()&&!Storage$1.getLocal("ARK_TRACK_LOGIN"))}var time_zone="GMT"+Util$1.clientTimeZone(),language=(navigator.language||navigator.browserLanguage).toLowerCase();function getSessionId(){return sessionId$1.getId()}function is_first_time(){var e=Storage$1.getLocal("FRISTIME");return Storage$1.setLocal("FRISTIME",!1),e}function is_first_day(){var e=new Date,t=e.getFullYear(),r=e.getMonth()+1;r=r<10?"0"+r:r;var n=e.getDate(),i=t+""+r+(n=n<10?"0"+n:n),o=Storage$1.getLocal("FRISTDAY");return!o||i===o}function original_id(){return getIdentifyId()||getUUId()}function getReferrer(){return document.referrer}function getReferrerDomain(){return domain(document.referrer)}function getTitle(){return document.title}function startup_time(){return Storage$1.getSession("STARTUPTIME")||""}function getUrl(){return window.location.href}function getLibVersion(){return base.$lib_version}var old_UTM=Storage$1.getSession("ARK_UTM")||"";function utm_campaign_id(){return UTM.utm_campaign_id}function utm_source(){return UTM.utm_source}function utm_medium(){return UTM.utm_medium}function utm_term(){return UTM.utm_term}function utm_content(){return UTM.utm_content}function utm_campaign(){return UTM.utm_campaign}UTM.utm_campaign&&UTM.utm_source&&UTM.utm_medium?(old_UTM!==JSON.stringify(UTM)&&sessionId$1.setId(),Storage$1.setSession("ARK_UTM",JSON.stringify(UTM))):(clearUTM(),Storage$1.removeSession("ARK_UTM"));var getField={getAppId:getAppId,getId:getId,getUploadURL:getUploadURL,appkey:appkey,debugMode:debugMode,uploadURL:uploadURL,getDebugMode:getDebugMode,nowDate:nowDate,getXwhat:getXwhat,isLogin:isLogin,time_zone:time_zone,language:language,getSessionId:getSessionId,is_first_time:is_first_time,is_first_day:is_first_day,original_id:original_id,getReferrer:getReferrer,getReferrerDomain:getReferrerDomain,getTitle:getTitle,getUrl:getUrl,startup_time:startup_time,checkSpider:checkSpider,getLibVersion:getLibVersion,utm_campaign_id:utm_campaign_id,utm_source:utm_source,utm_medium:utm_medium,utm_term:utm_term,utm_content:utm_content,utm_campaign:utm_campaign,timeCalibration:timeCalibration},fieldRules={resetKeywords:["appid","$debug","uploadUrl"],uploadURL:{valueType:0,value:getUploadURL,check:{value:["isString","nimLength","isUrl"],errorCode:"60007",successCode:"20008"}},appid:{valueType:0,value:getAppId,check:{value:["isString","nimLength"],errorCode:"60006",successCode:"20006"}},hash:{check:{value:["isBoolean"],errorCode:"60003"}},auto:{check:{value:["isBoolean"],errorCode:"60003"}},autoProfile:{check:{value:["isBoolean"],errorCode:"60003"}},pageProperty:{check:{value:["isObject"],errorCode:"600016"}},xwho:{valueType:0,value:getId,check:{value:["isString","nimLength"]}},xwhen:{valueType:0,value:nowDate},xwhat:{valueType:0,value:getXwhat,check:{value:["isString","nimLength"]}},xcontext:{$lib:{valueType:1,value:"JS"},$lib_version:{valueType:0,value:getLibVersion,check:{value:["isString"],successCode:"20007"}},$platform:{valueType:1,value:"JS"},$debug:{valueType:0,value:getDebugMode,check:{value:["isNumber","isDebug"]}},$is_login:{valueType:0,value:isLogin,check:{value:["isBoolean"]}},$screen_width:{valueType:1,value:window.screen.width,check:{value:["isNumber"]}},$screen_height:{valueType:1,value:window.screen.height,check:{value:["isNumber"]}},$time_zone:{valueType:1,value:time_zone},$language:{valueType:1,value:language},$session_id:{valueType:0,value:getSessionId},$is_first_time:{valueType:0,value:is_first_time},$is_first_day:{valueType:0,value:is_first_day},$referrer:{valueType:0,value:getReferrer},$referrer_domain:{valueType:0,value:getReferrerDomain},$title:{valueType:0,value:getTitle},$url:{valueType:0,value:getUrl},$startup_time:{valueType:0,value:startup_time},$web_crawler:{valueType:0,value:checkSpider},$original_id:{valueType:0,value:original_id},$utm_campaign_id:{valueType:0,value:utm_campaign_id},$utm_source:{valueType:0,value:utm_source},$utm_medium:{valueType:0,value:utm_medium},$utm_term:{valueType:0,value:utm_term},$utm_content:{valueType:0,value:utm_content},$utm_campaign:{valueType:0,value:utm_campaign},$is_time_calibrated:{valueType:0,value:timeCalibration}},xcontextCommonRule:{check:{key:["isString","length99","notSpecialCharacters","keywords"],value:["notObject","isArrayString","length255"]}},$track:{check:{key:["isString","notSpecialCharacters","length99"]}},$alias:{check:{key:["isString","keyLength255"]}},$profile_increment:{check:{key:["isString","length99","notSpecialCharacters"],value:["isNumber"]}},$profile_unset:{check:{key:["isString","length99","notSpecialCharacters"]}},$pageview:{check:{key:["isString","keyLength255"]}}},lifecycle={},fieldRules$1={"visitorConfigURL ":{check:{value:["isUrl"]}}},fieldTemplate$1={};function getElementContent(e){e.innerText;var t="";return e.textContent?t=Util$1.trim(e.textContent):e.innerText&&(t=Util$1.trim(e.innerText)),"input"!=e.tagName.toLowerCase()||"button"!=e.type&&"submit"!=e.type||(t=Util$1.trim(e.value)||""),t&&(t=t.replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)),t}function parseEvent(e){var t=e.link,r=e.index,n=parserDom(t);if(0!==n.length){for(var i=n[0],o=document.querySelectorAll(i.link),a=[],s=0;s<o.length;s++)domParentList(o[s])===t&&a.push(o[s]);return o=[],e.ele=a[r],{allEleList:a,obj:e,index:r}}}function parserDom(e){var t=[];if(e.indexOf("<")<0)return t;for(var r=e.split("<"),n=0;n<r.length;n++){var i=r[n].split("#");t.push({link:i[0]}),i.length>1&&t.push({link:"#"+i[1]})}return t}function isParent(e,t){for(;e!=undefined&&null!=e&&"BODY"!=e.tagName.toUpperCase();){if(e==t)return!0;e=e.parentNode}return!1}function domParentList(e){for(var t=[],r=e;null!=r;){var n=r.tagName;if(!n)break;n=n.toLowerCase();var i=r.id?"#"+r.id:"";if(r.classList&&r.classList.length>0){for(var o="",a=0;a<r.classList.length;a++)r.classList[a].indexOf("ARK")<0&&(o+="."+r.classList[a]);t.push(n+i+o)}else t.push(n+i);r=r.parentNode}return t.join("<")}function getJSON(t){if(t.indexOf("\n")>-1&&(t=t.replace(/[\r\n]/g,"")),"object"===_typeof_1(t))return t;try{return JSON.parse(t)}catch(e){return{}}}function getHttpObj(){var t=null;if(window.XDomainRequest)return new XDomainRequest;if(window.XMLHttpRequest)t=new XMLHttpRequest;else try{t=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){try{t=new ActiveXObject("Msxml2.XMLHTTP")}catch(r){t=new XMLHttpRequest}}return t}function xmlhttp(t){var r=!1,n=new getHttpObj;n.onload=function(e){r||(r=!0,t.success(getJSON(n.responseText),n))},n.onerror=function(e){r||(r=!0,t.error(getJSON(n.responseText),n))},n.onreadystatechange=function(){if(4==n.readyState){try{if(n.getAllResponseHeaders().indexOf("Date")>-1||n.getAllResponseHeaders().indexOf("date")>-1){var i=+new Date,o=n.getResponseHeader("Date")||n.getResponseHeader("date");o&&Storage$1.setLocal("ANSSERVERTIME",+new Date(o)-i)}}catch(e){}if(n.status>=200&&n.status<300||304==n.status){if(r)return;r=!0,t.success(getJSON(n.responseText),n)}else{if(r)return;r=!0,t.error()}n.onreadystatechange=null,n.onload=null}};try{n.open(t.type,t.url,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),"GET"===t.type?n.send(null):n.send(t.data)}catch(e){}}function ajax(){this.xhr=getHttpObj(),this.url="",this.data="",this.type="GET",this.success=function(){},this.error=function(){}}ajax.prototype.get=function(e){var t=[];for(var r in e.data)t.push(r+"="+encodeURIComponent(e.data[r]));var n=e.url.indexOf("?")>-1?e.url+"&"+t.join("&"):e.url+"?"+t.join("&");this.url=n,this.data=e.data,this.type="GET",this.success=e.success||function(){},this.error=e.error||function(){},xmlhttp(this)},ajax.prototype.post=function(e){this.url=e.url,this.data=e.data,this.type="POST",this.success=e.success||function(){},this.error=e.error||function(){},xmlhttp(this)};var visitorConfig={};function loadVisitorSDK(){Util$1.addScript("AnalysysAgent_JS_SDK_VISUAL"),window.ARK_VISUAL={config:visitorConfig},Storage$1.setSession("visitor",!0)}function setIndex(e,t){var r=domParentList(e),n=parserDom(r);if(0!==n.length){for(var i=n[0],o=document.querySelectorAll(i.link),a=[],s=0;s<o.length;s++)domParentList(o[s])===r&&a.push(o[s]);for(s=0;s<a.length;s++)if(a[s]===e)return s;return 0}}function addElesListener(e){var t=e||window.event;t.touches&&t.touches.length>0&&(t=t.touches[0]);for(var r=t.target||t.srcElement,n=domParentList(r),i=setIndex(r,n),o=0;o<visitorEventList.length;o++){var a=visitorEventList[o].index,s=visitorEventList[o].appEventId,l=parseEvent(visitorEventList[o]);if(l.allEleList[a]==r||isParent(r,l.allEleList[a])||i==a&&n==visitorEventList[o].link){var c=visitorEventList[o].isText;if(c)c===getElementContent(r)&&AnalysysAgent.track(s);else AnalysysAgent.track(s)}}}var visitorEventList=[];function getVisitorEvent(){var e=visitorConfig.visitorConfigURL,t=window.location.hash;t.indexOf("?")>-1&&(t=t.split("?")[0]);var r=window.location.protocol+"//"+window.location.host+window.location.pathname+t,n={url:e,data:{appkey:visitorConfig.appid,lib:"Js",url:r},success:function(e){0===e.code&&(visitorEventList=e.data)},error:function(){}};(new ajax).get(n)}var url=window.location.href;function visitorPageViewInit(e){e.visitorConfigURL&&("/"!==e.visitorConfigURL.charAt(e.visitorConfigURL.length-1)&&(e.visitorConfigURL+="/"),e.visitorConfigURL=e.visitorConfigURL+"configure",getVisitorEvent(),"desktop"==Util$1.deviceType()?Util$1.addEvent(document,"click",addElesListener):Util$1.addEvent(document,"touchstart",addElesListener),Util$1.changeHash(function(){url!=window.location.href&&(url=window.location.href,getVisitorEvent())}))}function visitorInit(e){return visitorConfig=e,"Undefined"!=Util$1.paramType(window.top)&&top!==self&&(window.location.href.indexOf("visual=true")>-1||1==Storage$1.getSession("visitor"))?loadVisitorSDK():visitorPageViewInit(e),e}var lifecycle$1={AnalysysAgent:{init:visitorInit}},visitor={fieldRules:fieldRules$1,fieldTemplate:fieldTemplate$1,lifecycle:lifecycle$1};function getViewPortWidth(){return document.documentElement.clientWidth||document.body.clientWidth}function getViewPortHeight(){return document.documentElement.clientHeight||document.body.clientHeight}function getScrollTop(){return document.documentElement.scrollTop||document.body.scrollTop}var startDate=+new Date+(Storage$1.getLocal("ANSSERVERTIME")?Number(Storage$1.getLocal("ANSSERVERTIME")):0);function getDuration(){var e=+new Date+(Storage$1.getLocal("ANSSERVERTIME")?Number(Storage$1.getLocal("ANSSERVERTIME")):0),t=e-startDate;return startDate=e,t}function getDeviceType(){return Util$1.deviceType()}var fieldRules$2={autoWebstay:{check:{value:["isBoolean"]}},xcontext:{$viewport_width:{valueType:0,value:getViewPortWidth},$viewport_position:{valueType:0,value:getScrollTop},$viewport_height:{valueType:0,value:getViewPortHeight},$event_duration:{valueType:0,value:getDuration},$device_type:{valueType:0,value:getDeviceType}}},fieldTemplate$2={$webstay:{xcontext:["$referrer","$referrer_domain","$title","$url","$viewport_width","$viewport_position","$viewport_height","$event_duration","$device_type","$session_id","$is_time_calibrated","$is_first_day"]}},interval=null,topValue=0;function initWebStay(){var e=window.onscroll;function t(){var e=document.documentElement.scrollTop||document.body.scrollTop;topValue===e&&(clearTimeout(interval),interval=null,AnalysysAgent&&AnalysysAgent.freeApi?AnalysysAgent.freeApi("$webstay"):setTimeout(function(){t()},100))}window.onscroll=function(){e&&"Function"===Util$1.paramType(e)&&e(),clearTimeout(interval),interval=setTimeout(t,1e3),topValue=document.documentElement.scrollTop||document.body.scrollTop},setTimeout(startScroll,1e3)}function startScroll(){0==(document.documentElement.scrollTop||document.body.scrollTop)&&(AnalysysAgent&&AnalysysAgent.freeApi?AnalysysAgent.freeApi("$webstay"):setTimeout(function(){startScroll()},100))}function autoWebstayInit(e){return!0===e.autoWebstay&&initWebStay(),e}var lifecycle$2={AnalysysAgent:{init:autoWebstayInit}},webstay={fieldRules:fieldRules$2,fieldTemplate:fieldTemplate$2,lifecycle:lifecycle$2},elePostion={ele:"",click_x:0,click_y:0};function domParentList$1(e){for(var t=[],r=e;null!=r;){var n=0;if(r.parentNode){var i=r.parentNode.children;if(i)for(var o=0;o<i.length;o++)i[o]==r&&(n=o)}var a=r.tagName;if(a){a=a.toLowerCase();var s=r.id?"#"+r.id:"";if(r.classList&&r.classList.length>0){var l="";for(o=0;o<r.classList.length;o++)r.classList[o]&&r.classList[o].indexOf("ARK")<0&&(l+="."+r.classList[o]);t.push(a+s+l+"|"+n)}else t.push(a+s+"|"+n);r=r.parentNode}else r=r.parentNode}return t.join("<")}function getPageWidth(){return document.documentElement.scrollWidth}function getPageHeight(){return document.documentElement.scrollHeight}function getClickX(){return elePostion.click_x}function getClickY(){return elePostion.click_y}function getElementPath(){return domParentList$1(elePostion.ele)}function getUrlPath(){return location.protocol+"//"+location.host+location.pathname+location.hash}function getElementX(){return elePostion.elementX}function getElementY(){return elePostion.elementY}function getElementType(){return elePostion.ele.tagName.toLowerCase()}function getElementClickable(){var e=getElementType();if(["a","button","input","select","textarea","svg"].indexOf(e)>-1){if("svg"==e&&elePostion.ele.children&&elePostion.ele.children.length>0){for(var t=0,r=elePostion.ele.children,n=0;n<r.length;n++)"use"==r[n].tagName.toLowerCase()&&r[n].getAttribute("xlink:href")&&(t=1);return t}return 1}return 0}function getEleContent(){return getElementContent(elePostion.ele)}function getDeviceType$1(){return Util$1.deviceType()}function getElementId(){return elePostion.ele.id||elePostion.ele.getAttribute("id")||""}function getElementName(){return elePostion.ele.getAttribute("name")||""}function getElementClassName(){return elePostion.ele.className||""}function getElementTargetUrl(){return elePostion.ele.getAttribute("href")||""}var fieldRules$3={autoHeatmap:{check:{value:["isBoolean"]}},xcontext:{$page_width:{valueType:0,value:getPageWidth},$page_height:{valueType:0,value:getPageHeight},$click_x:{valueType:0,value:getClickX},$click_y:{valueType:0,value:getClickY},$element_path:{valueType:0,value:getElementPath},$url_path:{valueType:0,value:getUrlPath},$element_x:{valueType:0,value:getElementX},$element_y:{valueType:0,value:getElementY},$element_type:{valueType:0,value:getElementType},$element_clickable:{valueType:0,value:getElementClickable},$element_content:{valueType:0,value:getEleContent},$device_type:{valueType:0,value:getDeviceType$1},$element_id:{valueType:0,value:getElementId},$element_name:{valueType:0,value:getElementName},$element_target_url:{valueType:0,value:getElementTargetUrl},$element_class_name:{valueType:0,value:getElementClassName}}},fieldTemplate$3={$web_click:{xcontext:["$page_width","$page_height","$click_x","$click_y","$element_path","$url_path","$url","$title","$session_id","$device_type","$session_id","$is_time_calibrated","$element_x","$element_y","$element_type","$element_clickable","$element_content","$is_first_day","$element_id","$element_name","$element_target_url","$element_class_name"]}},heatmapConfig={};function loadHeatmapSDK(){document.body&&document.getElementsByTagName("body")[0]?(Util$1.addScript("AnalysysAgent_JS_SDK_HEATMAP"),window.ARK_HEATMAP={config:heatmapConfig}):setTimeout(loadHeatmapSDK,50)}function offset(e,t){for(var r="offset"+t.split("")[0].toUpperCase()+t.substring(1),n=e[r],i=e.offsetParent;null!=i;)n+=i[r],i=i.offsetParent;return n}function addClickEvent(e){var t=e||window.event;t.touches&&t.touches.length>0&&(t=t.touches[0]);var r=document.documentElement.scrollLeft||document.body.scrollLeft,n=document.documentElement.scrollTop||document.body.scrollTop,i=t.pageX||t.clientX+r,o=t.pageY||t.clientY+n;elePostion.click_x=i,elePostion.click_y=o,elePostion.ele=t.target||t.srcElement,elePostion.elementX=i-offset(elePostion.ele,"left"),elePostion.elementY=o-offset(elePostion.ele,"top"),!i||!o||i<=0||o<=0||(AnalysysAgent&&AnalysysAgent.freeApi?AnalysysAgent.freeApi("$web_click"):setTimeout(function(){addClickEvent(e)},100))}function initHeatmap(){"desktop"==Util$1.deviceType()?Util$1.addEvent(document,"click",addClickEvent):Util$1.addEvent(document,"touchstart",addClickEvent)}function heatmapInit(e){return heatmapConfig=e,!0===e.autoHeatmap&&(window.location.href.indexOf("arkheatmap=true")>-1?loadHeatmapSDK():initHeatmap()),e}for(var lifecycle$3={AnalysysAgent:{init:heatmapInit}},heatmap={fieldRules:fieldRules$3,fieldTemplate:fieldTemplate$3,lifecycle:lifecycle$3},fieldRules$4={xcontext:{$user_agent:{valueType:1,value:encodeURIComponent(window.navigator.userAgent)}}},temp={},event=["$startup","$track","$pageview","$webstay","$web_click","$errorLog"],common={xcontext:["$user_agent"]},i=0;i<event.length;i++)temp[event[i]]=common;var ua={fieldRules:fieldRules$4,fieldTemplate:temp},fieldRules$5={},fieldTemplate$4={},hybridAns={identify:function(e){transporter("identify",backParamsArray(e))},alias:function(e,t){transporter("alias",backParamsArray(e,t))},reset:function(){transporter("reset",[])},track:function(e,t){transporter("track",backParamsArray(e,t))},profileSet:function(e,t){transporter("profileSet",backParamsArray(e,t))},profileSetOnce:function(e,t){transporter("profileSetOnce",backParamsArray(e,t))},profileIncrement:function(e,t){transporter("profileIncrement",backParamsArray(e,t))},profileAppend:function(e,t){transporter("profileAppend",backParamsArray(e,t))},profileUnset:function(e){transporter("profileUnset",backParamsArray(e))},profileDelete:function(){transporter("profileDelete",[])},registerSuperProperty:function(e,t){transporter("registerSuperProperty",backParamsArray(e,t))},registerSuperProperties:function(e,t){transporter("registerSuperProperties",backParamsArray(e,t))},unRegisterSuperProperty:function(e){transporter("unRegisterSuperProperty",backParamsArray(e))},clearSuperProperties:function(){transporter("clearSuperProperties",[])},getSuperProperty:function(e,t){transporter("getSuperProperty",backParamsArray(e),t.name)},getSuperProperties:function(e){transporter("getSuperProperties",[],e.name)},pageView:function(e,t){t?(t.$url=location.href,t.$title=document.title):t={$url:location.href,$title:document.title},transporter("pageView",backParamsArray(e,t))},getDistinctId:function(e){transporter("getDistinctId",[],e.name)}};function loadIframeUrl(e){var t=document.createElement("iframe");t.setAttribute("src",e),t.setAttribute("id","AnalysysAgentIframe"),t.setAttribute("style","display:none;"),document.body?(document.body.appendChild(t),t.parentNode.removeChild(t)):setTimeout(function(){loadIframeUrl(e)},200)}function transporter(e,t,r){var n={functionName:e,functionParams:t};r!==undefined&&(n.callbackFunName=r),loadIframeUrl("analysysagent:"+JSON.stringify(n))}function backParamsArray(){for(var e=arguments,t=[],r=0;r<e.length;r++)e[r]!==undefined&&t.push(e[r]);return t}function initHybrid(){for(var e=window.AnalysysAgent,t=!0,r=null,n=0;n<e.length;n++)"auto"===e[n][0]&&!1===e[n][1]&&(t=!1),"pageProperty"===e[n][0]&&"Object"===Util$1.paramType(e[n][1])&&(r=e[n][1]),"Function"!==Util$1.paramType(hybridAns[e[n][0]])||hybridAns[e[n][0]](e[n][1],e[n][2]);!1!==t&&(r?(r.$url=location.href,r.$title=document.title):r={$url:pageHash,$title:document.title},transporter("pageView",backParamsArray("",r)),checkHash())}var pageHash=location.href;function hashView(){pageHash!==location.href&&transporter("pageView",backParamsArray("",{$url:pageHash=location.href,$title:document.title}))}function checkHash(){Util$1.changeHash(function(){hashView()})}for(var lifecycle$4={AnalysysAgent:{hybrid:initHybrid,hybridAns:hybridAns}},hybrid={fieldRules:fieldRules$5,fieldTemplate:fieldTemplate$4,lifecycle:lifecycle$4},plugList=[visitor,webstay,heatmap,ua,hybrid],fieldRules$6=fieldRules||{},fieldTemplate$5=fieldTemplate||{},lifecycle$5=lifecycle||{},i$1=0;i$1<plugList.length;i$1++)plugList[i$1].fieldRules&&(fieldRules$6=Util$1.objMerge(fieldRules$6,plugList[i$1].fieldRules)),plugList[i$1].fieldTemplate&&(fieldTemplate$5=Util$1.objMerge(fieldTemplate$5,plugList[i$1].fieldTemplate)),plugList[i$1].lifecycle&&(lifecycle$5=Util$1.fnMerge(lifecycle$5,plugList[i$1].lifecycle));for(var eventTemp={},commonTemp={},baseTemp=fieldTemplate$5.base,outerTemp=baseTemp.outer,i$2=0;i$2<outerTemp.length;i$2++)baseTemp[outerTemp[i$2]]?commonTemp[outerTemp[i$2]]=Util$1.toObj(baseTemp[outerTemp[i$2]]):commonTemp[outerTemp[i$2]]="";for(var key in fieldTemplate$5)"base"!=key&&(eventTemp[key]=Util$1.objMerge(commonTemp,Util$1.toDeepObj(fieldTemplate$5[key])));function temp$1(e){return eventTemp[e]||eventTemp.commonTemp}eventTemp.commonTemp=commonTemp;var errorMessage={common:"{FN}:Property key invalid, nonsupport value: $lib/$lib_version/$platform/$first_visit_time/$debug/$is_login \ncurrent KEY:{KEY}",60001:"{FN}:Property key invalid, support type: String \ncurrent key:{KEY}\n",60002:"{FN}:Property value invalid of key[{KEY}], support type: Number \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",60003:"{FN}:Property value invalid of key[{KEY}], support type: Boolean \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",60004:"{FN}:Property value invalid of key[{KEY}], support type: Array \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",60005:"{FN}:The length of the property[{KEY}] value (string[{VALUE}]) needs to be 1-255 !",60006:"Please set appkey first.",60007:"Please set uploadURL first.",60008:"Send message failed.",60009:"{FN}:The length of the property key (string[{KEY}]) needs to be 1-125 !",600010:"{FN}:The length of the property key (string[{KEY}]) needs to be 1-99 !",600011:"{FN}:[{KEY}] does not conform to naming rules!",600012:"{FN}:Property key invalid, nonsupport value: $lib/$lib_version/$platform/$first_visit_time/$debug/$is_login \ncurrent KEY:{KEY}",600013:"{FN}:Property value invalid of key[{KEY}], support type: Array with String as its internal element \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",600016:"{FN}:Property value invalid of key[{KEY}], support type: Object \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",600017:"{FN}:The length of the property key (string[{KEY}]) needs to be 1-255 !",600018:"{FN}:Property value invalid of key[{KEY}] invalid, support type: String \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",600019:"{FN}:The length of the property[{KEY}] value (string[{VALUE}]) needs to be 1-255 !",600020:"{FN}:Property value invalid of key[{KEY}], support type: Boolean/Array/String/Number \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}"},successMessage={common:"",20001:"Send message success",20002:"{FN}: set success ({VALUE})",20003:"{FN}:({VALUE}) delete success",20004:"{FN}:clear success",20005:"{FN}:reset success",20006:"set appkey success. current appkey : {VALUE}",20007:"Init Analysys JS sdk success, version : {VALUE}",20008:"set uploadURL success. current uploadURL : {VALUE}",20009:"{FN}:[{KEY}] : get failed",20010:"{FN}:[{KEY}] : get success. ({VALUE})",20011:"{FN}:({VALUE}) delete failed"};function successLog(t){if(1===baseConfig.base.$debug||2===baseConfig.base.$debug){var r=baseConfig.status,n=r.successCode,i=r.FnName,o=r.key,a=r.value,s=(successMessage[n]||successMessage.common).replace(/{FN}/,i).replace(/{KEY}/g,o).replace(/{VALUE}/g,a);if(t&&(s=t),!s)return;if("Object"===Util$1.paramType(console)&&console.log)try{return console.log.apply(console,s)}catch(e){console.log(s)}}}function errorLog(){var e=baseConfig.status,t=e.errorCode,r=e.FnName,n=e.key,i=e.value;"Object"==Util$1.paramType(i)&&(i=JSON.stringify(i));var o=Util$1.paramType(i);"600018"!==t||n||(t="600011"),"60005"!==t||n||(t="600017"),("600017"===t||"600019"===t||"60009"===t||"600010"===t||"60005"===t)&&i.length&&i.length>30&&(i=Util$1.stringSlice(i,30)+"..."),n&&n.length>30&&(n=Util$1.stringSlice(n,30)+"..."),r&&r.length>30&&(r=Util$1.stringSlice(r,30)+"...");var a=(errorMessage[t]||errorMessage.common).replace(/{FN}/g,r).replace(/{KEY}/g,n).replace(/{VALUE}/g,i).replace(/{VALUETYPE}/g,o);if(1!==baseConfig.base.$debug&&2!==baseConfig.base.$debug||console.warn(a),lifecycle$5.errorLog&&lifecycle$5.errorLog.init&&"60008"!==t){var s=baseConfig.status.FnName;lifecycle$5.errorLog.init(a),baseConfig.status.FnName=s}}var checkField=function(){};checkField.prototype=Util$1,checkField.prototype.isString=function(e){return baseConfig.status.errorCode="60001","String"===Util$1.paramType(e)},checkField.prototype.isNumber=function(e){return baseConfig.status.errorCode="60002","Number"===Util$1.paramType(e)},checkField.prototype.isBoolean=function(e){return baseConfig.status.errorCode="60003","Boolean"===Util$1.paramType(e)},checkField.prototype.isObject=function(e){return"Object"===this.paramType(e)},checkField.prototype.lengthRule=function(e,t,r){this.isNumber(r)||(r=Infinity);var n=!0;return this.isNumber(t)&&e.length&&e.length>t&&e.length<r+1||(baseConfig.status.errorCode="60005",n=!1),n},checkField.prototype.nimLength=function(e){return this.lengthRule(e,0)},checkField.prototype.length99=function(e){var t=this.lengthRule(e,0,99);return t||(baseConfig.status.errorCode="600010"),t},checkField.prototype.length125=function(e){var t=this.lengthRule(e,0,125);return t||(baseConfig.status.errorCode="60009"),t},checkField.prototype.length255=function(e){if(!(e||this.isString(e)||this.isNumber(e)||this.isBoolean(e)))return baseConfig.status.errorCode="60005",!1;"String"!==this.paramType(e)&&(e=e.toString());var t=this.lengthRule(e,0,255);return t||(baseConfig.status.errorCode="600019"),t},checkField.prototype.keyLength255=function(e){var t=this.length255(e);return t||(baseConfig.status.errorCode="600017"),t},checkField.prototype.isUrl=function(e){var t=e;return 1==new RegExp(/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?/).test(t)||(baseConfig.status.errorCode="60006",!1)},checkField.prototype.isDebug=function(e){return!(!this.isNumber(e)||0!==e&&1!==e&&2!==e)},checkField.prototype.notObject=function(e){var t=!this.isObject(e);return t||(baseConfig.status.errorCode="600020"),t},checkField.prototype.notSpecialCharacters=function(e){return!(new RegExp("[\\u4E00-\\u9FA5]|[\\uFE30-\\uFFA0]","gi").test(e)||!/^[$a-zA-Z][a-zA-Z0-9_$]{0,}$/.test(e))||(baseConfig.status.errorCode="600011",!1)},checkField.prototype.isArrayString=function(e){if("Array"===this.paramType(e))for(var t=0;t<e.length;t++){if("String"!==this.paramType(e[t]))return baseConfig.status.errorCode="600013",!1;if(!this.length255(e[t]))return e[t]&&e[t].length>500&&(e[t]=Util$1.stringSlice(e[t],499)+"$"),baseConfig.status.value=e[t],!1}return!0},checkField.prototype.keywords=function(e){return!(baseConfig.keywords.indexOf(e)>-1)||(baseConfig.status.errorCode="600012",!1)};var checkRule=new checkField;function check(e,t){for(var r=0;r<t.length;r++){if(!checkRule[t[r]](e))return!1}return!0}function checkFields(e,t,r){var n=r.check,i=!0;if(!n)return i;var o=n.key,a=n.value;return a||(a=fieldRules$6.xcontextCommonRule.value),o&&(baseConfig.status.code=200,i=check(e,o),baseConfig.status.key=e,i||(baseConfig.status.code=400,errorLog())),a&&(baseConfig.status.code=200,i=check(t,a),"Array"!==Util$1.paramType(t)&&(baseConfig.status.value=t),i||(baseConfig.status.code=400,errorLog())),i}function resetCode(){baseConfig.status={code:200,FnName:baseConfig.status.FnName||"",key:"",value:"",errorCode:"",successCode:""}}function fillField(e,t){var r=t||fieldRules$6,n={};for(var i in e){var o=e[i],a=r[i];if(a){var s="";if("Object"===Util$1.paramType(o)){var l=fillField(o,a);n[i]=l}else Util$1.objHasKay(a,"valueType")&&(0===a.valueType&&((s=a.value())&&s.length>500?n[i]=Util$1.stringSlice(s,499)+"$":n[i]=s),1===a.valueType&&((s=a.value)&&s.length>500?n[i]=Util$1.stringSlice(s,499)+"$":n[i]=s))}}return n}function clearCache(e){if(!(e=e||!1)){var t=baseConfig.base;for(var r in t){if("Object"!==Util$1.paramType(t[r]))if("$debug"===r||"appid"===r||"uploadURL"===r)Storage$1.getLocal("ANS"+r.toUpperCase())!==t[r]&&(e=!0),e&&Storage$1.setLocal("ANS"+r.toUpperCase(),t[r])}}return e&&(removeAliasId(),removeIdentifyId(),Storage$1.removeLocal("ARKSUPER"),Storage$1.removeSession("STARTUP"),Storage$1.setLocal("FRISTDAY",Util$1.format(new Date,"yyyyMMdd")),Storage$1.setLocal("FRISTIME",!0),Storage$1.removeLocal("POSTDATA"),Storage$1.removeLocal("ANSSERVERTIME"),Storage$1.removeLocal("ARKFRISTPROFILE")),e}function isStartUp(){var e=Storage$1.getSession("STARTUP")||!1;return!1===e&&(Storage$1.setSession("STARTUP",!0),Storage$1.setSession("STARTUPTIME",Util$1.format(new Date,"yyyy-MM-dd hh:mm:ss.SSS")),sessionId$1.setId()),e}function checkBase(){for(var e in baseConfig.base){resetCode(),baseConfig.status.key=e;var t=fieldRules$6[e];"$debug"===e&&(t=fieldRules$6.xcontext[e]),"$lib_version"===e&&(t=fieldRules$6.xcontext[e]);var r=t;if(r&&!checkFields(e,baseConfig.base[e],r))return baseConfig.base[e]="",!1;successLog()}return!0}function checkPrivate(e,t,r){resetCode();var n=fieldRules$6[t]||fieldRules$6.xcontextCommonRule;if("Object"!==Util$1.paramType(e)||1==r){var i=n.check.key,o=check(Util$1.trim(e),i);if(baseConfig.status.key=e,!o)return errorLog(),!1}else for(var a in e){(o=checkFields(a,e[a],n))||"600019"===baseConfig.status.errorCode&&e[a]&&e[a].length>500&&(e[a]=Util$1.stringSlice(e[a],499)+"$")}return!0}var postStatus=!0,send_type="img",rx_dangerous=/[\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;function delRx(e){if("Array"===Util$1.paramType(e))for(var t=0;t<e.length;t++)e[t]=delRx(e[t]);if("Object"===Util$1.paramType(e))for(var r in e){var n=e[r];e[r]=delRx(n)}return"String"===Util$1.paramType(e)&&(e=e.replace(rx_dangerous,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),e}function sendPost(e,t){"img"!==send_type&&"NOT_STORAGE"!==t&&(postStatus=!1);var r=e;"Array"===Util$1.paramType(e)&&(e=delRx(e),r=JSON.stringify(e));var n=function(e){postStatus=!0,baseConfig.status.errorCode="60008",errorLog()},i=function(e){return function(r){200==r.code||400==r.code||4200==r.code?(baseConfig.status.successCode="20001",successLog(),function(e,t){postStatus=!0;var r=Storage$1.getLocal("POSTDATA")||[];if(Util$1.isEmptyObject(r)&&(r=[],Storage$1.removeLocal("POSTDATA")),0!==r.length){for(var n=[],i=0;i<r.length;i++){for(var o=!1,a=0;a<e.length;a++)e[a].xwhen!==r[i].xwhen&&e[a].xwhen&&r[i].xwhen||(o=!0);!1!==o||"Object"!==Util$1.paramType(r[i])||Util$1.isEmptyObject(r[i])||n.push(r[i])}r=null,n.length>0&&"NOT_STORAGE"!==t&&"img"!==send_type?(Storage$1.setLocal("POSTDATA",n),sendPost(n)):Storage$1.removeLocal("POSTDATA")}else Storage$1.removeLocal("POSTDATA")}(e,t)):n()}}(e),o={url:baseConfig.base.uploadURL+"up?appid="+baseConfig.base.appid,data:r,success:i,error:n};successLog("Send message to server: "+baseConfig.base.uploadURL+"up?appid="+baseConfig.base.appid+"\ndata:"+r),lifecycle$5.upload&&lifecycle$5.upload.init&&(o=lifecycle$5.upload.init(o)),"get"!=send_type?"img"!=send_type?"post"!=send_type?"send"!=send_type?(new ajax).post(o):snedGet(o,"send"):(new ajax).post(o):snedGet(o,"img"):snedGet(o)}function setValidKey(e){var t={data:Util$1.encode(e.data),send_type:""},r=[];for(var n in t)r.push(n+"="+encodeURIComponent(t[n]));var i=e.url.indexOf("?")>-1?e.url+"&"+r.join("&"):e.url+"?"+r.join("&");i=i.replace(baseConfig.base.uploadURL,"/");var o=Util$1.MD5(i,32).split("");return o[2]+""+o[0]+o[4]}function snedGet(e,t){if("send"==t&&navigator.sendBeacon){navigator.sendBeacon(e.url,e.data)&&e.success({code:200})}else{"send"!=t||navigator.sendBeacon||(t="img");var r=setValidKey(e);if(e.data={data:Util$1.encode(e.data),send_type:r},"img"==t){var n=[];for(var i in e.data)n.push(i+"="+encodeURIComponent(e.data[i]));var o=e.url.indexOf("?")>-1?e.url+"&"+n.join("&"):e.url+"?"+n.join("&"),a=document.createElement("img");a.src=o,a.width=1,a.height=1,a.onload=function(e){this.src="",this.onload=null,this.onerror=null,this.onabort=null},a.onerror=function(e){this.src="",this.onload=null,this.onerror=null,this.onabort=null},a.onabort=function(e){this.src="",this.onload=null,this.onerror=null,this.onabort=null},e.success({code:200})}"get"==t&&(new ajax).get(e)}}function checkLogBaseJson(e){if("Object"===Util$1.paramType(e)&&!Util$1.isEmptyObject(e)){for(var t=!0,r=0;r<baseConfig.baseJson.length;r++){var n=baseConfig.baseJson[r];"xwhat"!==n&&((!e[n]||"Object"==Util$1.paramType(e[n])&&Util$1.isEmptyObject(e[n]))&&(t=!1))}return t}return!1}function checkSavaData(e){var t=[];if("Array"===Util$1.paramType(e)&&e.length>0)for(var r=0;r<e.length;r++){var n=checkSavaData(e[r]);n.length>0&&t.push.apply(t,n)}return"Object"===Util$1.paramType(e)&&!Util$1.isEmptyObject(e)&&checkLogBaseJson(e)&&t.push(e),t}function upLog(e,t){baseConfig.base.sendType&&(send_type=baseConfig.base.sendType);var r=[];if("NOT_STORAGE"==t||"img"==send_type)r=checkSavaData(e);else{var n=Storage$1.getLocal("POSTDATA")||[];0==(n=checkSavaData(n)).length?Storage$1.removeLocal("POSTDATA"):r=n,r=n,n.length<500?r.push.apply(r,checkSavaData(e)):r=checkSavaData(e),Storage$1.setLocal("POSTDATA",r)}if((!1!==postStatus||"img"===send_type||"NOT_STORAGE"===t)&&r.length>0)if("img"===send_type)for(var i=0;i<r.length;i++)sendPost([r[i]]);else sendPost(r,t)}function pageView(e,t){baseConfig.status.FnName="$pageview",resetCode();var r={$pagename:""};if(arguments.length>0&&checkPrivate(r={$pagename:e}),t)checkPrivate(t);t={xcontext:t||{}};var n=Storage$1.getLocal("ARKSUPER")||{};t=Util$1.objMerge({xcontext:n},t),t=Util$1.objMerge({xcontext:r},t);var i=temp$1("$pageview"),o=Util$1.delEmpty(fillField(i));upLog(Util$1.objMerge(o,t))}var pageUrl=window.location.href;function hashPageView(){Util$1.changeHash(function(){pageUrl!==window.location.href&&(pageUrl=window.location.href,pageView())})}function track(e,t){baseConfig.status.FnName=e||"$track",resetCode();checkPrivate(e,"$track",!0);baseConfig.status.FnName=e,t&&(checkPrivate(t),t={xcontext:t});var r=Storage$1.getLocal("ARKSUPER")||{};t=Util$1.objMerge({xcontext:r},t);var n=fillField(temp$1("$track"));n.xcontext=Util$1.delEmpty(n.xcontext),upLog(Util$1.objMerge(n,t))}function freeApi(e){baseConfig.status.FnName=e,resetCode();var t=temp$1(e);if(t){var r=fillField(t),n=Storage$1.getLocal("ARKSUPER")||{};r=Util$1.objMerge({xcontext:n},r),upLog(Util$1.delEmpty(r),"NOT_STORAGE")}}function getPresetProperties(){baseConfig.status.FnName="$getPresetProperties",resetCode();var e=fillField(temp$1("$getPresetProperties"));return e.xcontext.$first_visit_time=Storage$1.getLocal("ARKFRISTPROFILE")||"",delete e.xcontext.$is_login,Util$1.delEmpty(e.xcontext)}function alias(e,t){baseConfig.status.FnName="$alias",resetCode();var r=checkPrivate(e,"$alias",!0);if(r){t&&(r=checkPrivate(t,"$alias",!0))&&Storage$1.setLocal("ARK_TRACKID",t),Storage$1.setLocal("ARK_LOGINID",e);var n=fillField(temp$1("$alias"));if(upLog(Util$1.delEmpty(n)),!0===baseConfig.base.autoProfile){baseConfig.status.FnName="$profile_set_once";var i=fillField(temp$1("$profile_set_once")),o=Util$1.format(new Date,"yyyy-MM-dd hh:mm:ss.SSS"),a={$first_visit_time:o,$first_visit_language:(navigator.language||navigator.browserLanguage).toLowerCase()},s=Util$1.objMerge(i,{xcontext:a});upLog(Util$1.delEmpty(s)),Storage$1.setLocal("ARKFRISTPROFILE",o)}}}function identify(e,t){baseConfig.status.FnName="$identify",resetCode(),checkPrivate(e,"$alias",!0)&&(!0===t&&Storage$1.setLocal("ARK_TRACK_LOGIN",!0),Storage$1.setLocal("ARK_TRACKID",e),baseConfig.status.successCode="20002",baseConfig.status.value=e,successLog())}function profileSet(e,t){baseConfig.status.FnName="$profile_set",resetCode();var r=Util$1.toObj(e,t);checkPrivate(r,"$profile_set");var n=temp$1("$profile_set"),i=Util$1.delEmpty(fillField(n));upLog(Util$1.objMerge(i,{xcontext:r}))}function profileSetOnce(e,t){baseConfig.status.FnName="$profile_set_once",resetCode();var r=Util$1.toObj(e,t);checkPrivate(r,"$profile_set_once");var n=temp$1("$profile_set_once"),i=Util$1.delEmpty(fillField(n));upLog(Util$1.objMerge(i,{xcontext:r}))}function profileIncrement(e,t){baseConfig.status.FnName="$profile_increment",resetCode();var r=Util$1.toObj(e,t);checkPrivate(r,"$profile_increment");var n=temp$1("$profile_increment"),i=Util$1.delEmpty(fillField(n));upLog(Util$1.objMerge(i,{xcontext:r}))}function profileAppend(e,t){baseConfig.status.FnName="$profile_append",resetCode();var r=Util$1.toObj(e,t);checkPrivate(r,"$profile_append");var n=temp$1("$profile_append"),i=Util$1.delEmpty(fillField(n));upLog(Util$1.objMerge(i,{xcontext:r}))}function profileUnset(e){baseConfig.status.FnName="$profile_unset",resetCode();checkPrivate(e,"$profile_unset",e);var t=Util$1.toObj(e,"");checkPrivate(t,"$profile_unset");var r=fillField(temp$1("$profile_unset"));upLog(Util$1.objMerge(r,{xcontext:t}))}function profileDelete(){baseConfig.status.FnName="$profile_delete",resetCode(),upLog(fillField(temp$1("$profile_delete")))}function registerSuperProperty(e,t){baseConfig.status.FnName="$registerSuperProperty",resetCode();var r=Util$1.toObj(e,t);checkPrivate(r,"$registerSuperProperty");var n=Storage$1.getLocal("ARKSUPER")||{},i=Util$1.objMerge(n,r);Storage$1.setLocal("ARKSUPER",i),baseConfig.status.successCode="20002",baseConfig.status.value=JSON.stringify(r),successLog()}function registerSuperProperties(e,t){baseConfig.status.FnName="$registerSuperProperties",resetCode();var r=Util$1.toObj(e,t);checkPrivate(r,"$registerSuperProperties");var n=Storage$1.getLocal("ARKSUPER")||{},i=Util$1.objMerge(n,r);Storage$1.setLocal("ARKSUPER",i),baseConfig.status.successCode="20002",baseConfig.status.value=JSON.stringify(r),successLog()}function getSuperProperty(e){baseConfig.status.FnName="$getSuperProperty",resetCode();checkPrivate(e,"$getSuperProperty",!0);var t=(Storage$1.getLocal("ARKSUPER")||{})[e];return t?(baseConfig.status.successCode="20010",baseConfig.status.key=e,baseConfig.status.value=t,successLog(),t):(baseConfig.status.successCode="20009",baseConfig.status.key=e,successLog(),"")}function getSuperProperties(){baseConfig.status.FnName="$getSuperProperties",resetCode();var e=Storage$1.getLocal("ARKSUPER")||{};return baseConfig.status.successCode="20010",baseConfig.status.value=JSON.stringify(e),successLog(),e}function unRegisterSuperProperty(e){baseConfig.status.FnName="$unregisterSuperProperty",resetCode();checkPrivate(e,"$unregisterSuperProperty",!0);var t=Storage$1.getLocal("ARKSUPER")||{};if(!t[e])return baseConfig.status.successCode="20011",baseConfig.status.value=e,void successLog();delete t[e],Storage$1.setLocal("ARKSUPER",t),baseConfig.status.successCode="20003",baseConfig.status.value=e,successLog()}function clearSuperProperties(){baseConfig.status.FnName="$clearSuperProperties",resetCode(),Storage$1.setLocal("ARKSUPER",{}),baseConfig.status.successCode="20004",successLog()}function reset(e,t){(resetCode(),removeUUId(),clearSuperProperties(),clearCache(!0),sessionId$1.setId(),!0===baseConfig.base.autoProfile)&&profileSetOnce({$reset_time:Util$1.format(new Date,"yyyy-MM-dd hh:mm:ss.SSS")});baseConfig.status.FnName="$reset",baseConfig.status.successCode="20005",successLog()}function getDistinctId(){return getIdentifyId()||getUUId()}var ans={pageView:pageView,profileSet:profileSet,profileSetOnce:profileSetOnce,profileIncrement:profileIncrement,profileAppend:profileAppend,profileUnset:profileUnset,profileDelete:profileDelete,alias:alias,identify:identify,track:track,registerSuperProperty:registerSuperProperty,registerSuperProperties:registerSuperProperties,getSuperProperty:getSuperProperty,getSuperProperties:getSuperProperties,unRegisterSuperProperty:unRegisterSuperProperty,clearSuperProperties:clearSuperProperties,reset:reset,freeApi:freeApi,getDistinctId:getDistinctId,getPresetProperties:getPresetProperties};function startUp(){var e=[];if(checkBase()){var t=Storage$1.getLocal("ARKSUPER")||{};if(!1===isStartUp()){baseConfig.status.FnName="$startup";var r=fillField(temp$1("$startup"));r=Util$1.objMerge({xcontext:t},r),e.push(Util$1.delEmpty(r))}var n=Storage$1.getLocal("ARKFRISTPROFILE")||!1;if(!0===baseConfig.base.autoProfile&&!n){baseConfig.status.FnName="$profile_set_once";var i=fillField(temp$1("$profile_set_once")),o=Util$1.format(new Date,"yyyy-MM-dd hh:mm:ss.SSS"),a={$first_visit_time:o,$first_visit_language:(navigator.language||navigator.browserLanguage).toLowerCase()},s=Util$1.objMerge(i,{xcontext:a});e.push(Util$1.delEmpty(s)),Storage$1.setLocal("ARKFRISTPROFILE",o)}if(!0===baseConfig.base.auto){baseConfig.status.FnName="$pageview";var l=fillField(temp$1("$pageview"));l=Util$1.objMerge({xcontext:t},Util$1.delEmpty(l));var c=baseConfig.base.pageProperty;Util$1.isEmptyObject(c)||(checkPrivate(c),l=Util$1.objMerge(l,{xcontext:c})),e.push(l)}e.length>0&&upLog(e),!0===baseConfig.base.hash&&hashPageView()}else errorLog()}var JSON2=createCommonjsModule(function(module,exports){!function(JSON){var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var r,n,i,o,a,s=gap,l=t[e];switch(l&&"object"===_typeof_1(l)&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),_typeof_1(l)){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(l)){for(o=l.length,r=0;r<o;r+=1)a[r]=str(r,l)||"null";return i=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,i}if(rep&&"object"===_typeof_1(rep))for(o=rep.length,r=0;r<o;r+=1)"string"==typeof rep[r]&&(i=str(n=rep[r],l))&&a.push(quote(n)+(gap?": ":":")+i);else for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(i=str(n,l))&&a.push(quote(n)+(gap?": ":":")+i);return i=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,i}}"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,r){var n;if(gap="",indent="","number"==typeof r)for(n=0;n<r;n+=1)indent+=" ";else"string"==typeof r&&(indent=r);if(rep=t,t&&"function"!=typeof t&&("object"!==_typeof_1(t)||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(e,t){var r,n,i=e[t];if(i&&"object"===_typeof_1(i))for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&((n=walk(i,r))!==undefined?i[r]=n:delete i[r]);return reviver.call(e,t,i)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(exports)});function ieCreat(){Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,r=Number(arguments[1])||0;for((r=r<0?Math.ceil(r):Math.floor(r))<0&&(r+=t);r<t;r++)if(r in this&&this[r]===e)return r;return-1})}if("Array"==Util$1.paramType(window.AnalysysAgent))if(ieCreat(),0==window.navigator.userAgent.indexOf("AnalysysAgent/Hybrid")){if(lifecycle$5.AnalysysAgent&&lifecycle$5.AnalysysAgent.hybrid&&lifecycle$5.AnalysysAgent.hybridAns){if(lifecycle$5.AnalysysAgent.hybrid(),"Array"===Util$1.paramType(AnalysysAgent$1))for(var i$3=0;i$3<AnalysysAgent$1.length;i$3++){var item=AnalysysAgent$1[i$3];"name"===item[0]&&(window[item[1]]=lifecycle$5.AnalysysAgent.hybridAns)}window.AnalysysAgent=lifecycle$5.AnalysysAgent.hybridAns}}else{var AnalysysAgent$1=window.AnalysysAgent;if("Array"===Util$1.paramType(AnalysysAgent$1)){for(var i$3=0;i$3<AnalysysAgent$1.length;i$3++){var item=AnalysysAgent$1[i$3];"Function"===Util$1.paramType(getField[item[0]])?getField[item[0]](item[1]):baseConfig.base[item[0]]=item[1]}clearCache();for(var i$3=0;i$3<AnalysysAgent$1.length;i$3++){var item=AnalysysAgent$1[i$3];Util$1.objHasKay(ans,item[0])&&("identify"===item[0]||"alias"===item[0]||item[0].indexOf("Super")>-1)&&ans[item[0]](item[1],item[2])}}lifecycle$5.AnalysysAgent&&lifecycle$5.AnalysysAgent.init&&lifecycle$5.AnalysysAgent.init(baseConfig.base),startUp();try{if("Array"===Util$1.paramType(AnalysysAgent$1))for(var i$3=0;i$3<AnalysysAgent$1.length;i$3++){var item=AnalysysAgent$1[i$3];Util$1.objHasKay(ans,item[0])&&"identify"!==item[0]&&"alias"!==item[0]&&item[0].indexOf("Super")<0&&ans[item[0]](item[1],item[2]),"name"===item[0]&&(window[item[1]]=ans)}}catch(e){}window.AnalysysAgent=ans}return ans});
